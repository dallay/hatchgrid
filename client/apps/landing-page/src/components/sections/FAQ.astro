---
import { type Lang, useTranslations } from "@/i18n";
import { getFAQs } from "@/models/faq/faq.service";

const currentLanguage = Astro.currentLocale as Lang
const t = useTranslations(currentLanguage);
const faqs = await getFAQs({
  lang: currentLanguage,
});
---
<section class="bg-white dark:bg-gray-900">
  <div class="py-24 px-4 md:px-10 lg:px-20 mx-auto max-w-screen-xl">
    <h2 class="mb-16 text-5xl font-bold text-center text-gray-900 dark:text-white">{t('faq.title')}</h2>
    <div class="flex flex-col gap-6">
      {faqs.map(faq => (
        <details class="group bg-white dark:bg-gray-800 p-8 rounded-2xl border border-gray-200 dark:border-gray-700">
          <summary class="flex items-center justify-between cursor-pointer list-none">
            <span class="text-lg font-semibold text-gray-900 dark:text-white">
              {faq.question}
            </span>
            <div class="text-gray-900 dark:text-white">
              <svg class="plus w-6 h-6 block group-open:hidden" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <svg class="minus w-6 h-6 hidden group-open:block" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </summary>
          <div class="mt-4 text-base text-gray-600 dark:text-gray-400 space-y-4" set:html={faq.answer} />
        </details>
      ))}
    </div>
  </div>
</section>
